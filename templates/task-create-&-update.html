{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow-lg rounded-4 p-4">
  {% if request.resolver_match.view_name == "workflows:task-update" %}
  <h2 class="mb-4 text-center">Edit Task</h2>
    {% else %}
    <h2 class="mb-4 text-center">Create Task</h2>
  {% endif %}


    <form method="post">
      {% csrf_token %}

      <div class="mb-3">
        {{ form.name.label_tag }}
        {{ form.name }}
        {% if form.name.errors %}
          <div class="text-danger">{{ form.name.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        {{ form.description.label_tag }}
        {{ form.description }}
        {% if form.description.errors %}
          <div class="text-danger">{{ form.description.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        {{ form.deadline.label_tag }}
        {{ form.deadline }}
        {% if form.deadline.errors %}
          <div class="text-danger">{{ form.deadline.errors }}</div>
        {% endif %}
      </div>

      <div class="form-check mb-3">
        {{ form.is_completed }}
        {{ form.is_completed.label_tag }}
        {% if form.is_completed.errors %}
          <div class="text-danger">{{ form.is_completed.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        {{ form.priority.label_tag }}
        {{ form.priority }}
        {% if form.priority.errors %}
          <div class="text-danger">{{ form.priority.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        {{ form.task_type.label_tag }}
        {{ form.task_type }}
        {% if form.task_type.errors %}
          <div class="text-danger">{{ form.task_type.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label class="form-label">Assignees</label>
        {% for checkbox in form.assignees %}
          <div class="form-check">
            {{ checkbox.tag }} {{ checkbox.choice_label }}
          </div>
        {% endfor %}
        {% if form.assignees.errors %}
          <div class="text-danger">{{ form.assignees.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        {{ form.project.label_tag }}
        {{ form.project }}
        {% if form.project.errors %}
          <div class="text-danger">{{ form.project.errors }}</div>
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary">Save Task</button>
    </form>
  </div>
</div>
{% endblock %}
